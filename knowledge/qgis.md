---
title: "QGISの使い方"
date: "2024-04-15"
---

QGISの使い方についてまとめたページです．

## フィールド計算機で，ある属性フィールドを別の属性フィールドの値によって指定して，新しい属性フィールドを作成する方法
1. レイヤのプロパティを開く
    - レイヤのプロパティを開くには，レイヤの右クリック > プロパティを選択します．
    - あるいは，レイヤのプロパティアイコンをクリックします．
1. フィールド計算機を開く
    - レイヤのプロパティウインドウの中にあるフィールドを選択します．
    - フィールド計算機アイコンをクリックします．
1. 新しいフィールドを作成する
    - 新しいフィールドを作成するには，新しいフィールドを追加します．
    - 新しいフィールドの名前を入力します．
    - 新しいフィールドの型を選択します．
    - ` attribute( concat('Peak',  "Exported Time-series (Butterworth-Sectioned)" ))`のような式を入力します．
        - この式は，"Exported Time-series (Butterworth-Sectioned)"というフィールドの値を取得し，その前に"Peak"という文字列を追加します．
        - さらにこの文字列が参照したいフィールド名となっており，最終的にそのフィールドの値を新しいフィールドに追加します．
        
## Excelファイルの読み込み方法

QGISでExcelファイルを読み込む方法について説明します．エクセルファイルには最低限，緯度，経度，地物名の情報が含まれていると仮定します．

1. エクセルデータをドラックアンドドロップでQGISに読み込む
    - 読み込みが完了すると，テーブルのアイコンがレイヤのウインドウの中に表示されます
    - キャンバスの中には何も表示されません
1. プロセシングツールボックスを開く
    - プラグイン > プロセシング > ツールボックスを選択します
    - 検索欄に`table`と入力します
    - `Table to point`，日本語であれば`テーブルから点レイヤを作成`を選択します
    - X値には経度(long)，Y値には緯度(lat)を選択します
    - 出力ファイル名を指定します．(そのままであれば，一時レイヤが生成されます)
    - `Run`あるいは`実行`をクリックします

## Openstreetmapで特定の地物だけを表示する方法

OpenStreetMapから特定の地物だけを表示する方法について説明します．具体的な手順は以下のとおりです．今回は建物データに限った場合を例に説明します．

1. OpenStreetMapから建物データを取得

まず、OpenStreetMapから建物データを取得する必要があります．これを行う方法はいくつかありますが、一般的な方法の1つは、Overpass APIを使用することです．Overpass APIを使用してOSMから特定のデータをクエリすることができます．QGISのQuickOSMプラグインを使用して簡単に行う方法を以下に示します．

- QuickOSMプラグインをインストールします
    - QGISを開き、Plugins > Manage and Install Plugins...に移動します．"QuickOSM"を検索してインストールします．
- QuickOSMを開きます
    - Vector > QuickOSM > QuickOSM...に移動します．
- 建物をクエリします
    - "Key"フィールドにbuildingと入力します．
    - "Value"フィールドは空のままにしておくか、必要に応じて建物の種類を指定します．
        - 例えば，住宅のみを取得したい場合はhouseあるいはapartmentsなどを指定します．
    - 建物を取得したいエリアを選択します．複数の選択方法があり，座標を入力するか，地図から選択するか，レイヤ境界から選択するなどの方法があります．
- `Run Query`をクリックします．これにより、建物データがダウンロードされ、QGISプロジェクトにロードされます．
